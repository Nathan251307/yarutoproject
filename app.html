<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App | Yaruto</title>
    <link rel="icon" type="image" href="logoyarutofavi.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sawarabi+Gothic&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
</head>
<style>

    .time-input {
        width: 60px;
        margin-right: 10px;
        text-align: center;
        font-family: Sawarabi Gothic;
    }

    .timer-controls {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-top: 10px;
    }

    .custom-time {
        display: flex;
        align-items: center;
        margin-top: 10px;
    }
    .delete-btn {
        width: 24px;
        height: 24px;
        border: 2px solid #b92c0d;
        border-radius: 50%;
        background: transparent;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        position: relative;
        transition: all 0.3 ease;
        margin-top: 30px;
        
    }

    .delete-btn::after {
        content: "";
        position: absolute;
        left: 6px;
        top: 2px;
        width: 6px;
        height: 12px;
        border-right: 2px solid white;
        
        border-bottom: 2px solid white;
        transform: rotate(45deg) scale(0); 
        transition: transform 0.3s ease;
    
    }

    .delete-btn.active {
        background-color: #b92c0d;  
    }

    .delete-btn.active::after {
        transform: rotate(45deg) scale(1);  
    }

    .task-item.removed {
        opacity: 0;
        transform: translateX(-50px);
        transition: all 0.5s ease;
    }
</style>
<body style="background-color: #ECDCC3;">
    <button style="font-family: Sawarabi Gothic; background-color: #b92c0d; color: white; margin-left: 1350px; margin-top: 10px;" onclick="window.location.href='index.html'">Logout</button>
    <div class="card" style="top: 30px; left: 30px; width: 250px; background-color: #ECDCC3; border-color: #ECDCC3; position: fixed;">
        <div>
            <h3 id="introduction" style="font-family: Sawarabi Gothic;"></h3> <br>
            <h4 style="font-family: Sawarabi Gothic">It is currently:</h4>
            <h3 class="clock", id="current-time" style="font-family: Sawarabi Gothic;"></h3>
            <br> 
            <br>
            <h5 class="card" style="background-color: #b92c0d; color: white; font-family: Sawarabi Gothic;">Pomodoro Focus Timer :3</h5>
            <h4 id="timer" style="font-family: Sawarabi Gothic; font-size: 30px; margin-top: 10px;">50:00</h4>
            <div class="timer-controls">
                <div class="custom-time">
                    <input type="number" id="custom-minutes" class="time-input" min="1" max="120" value="50">
                    <span style="font-family: Sawarabi Gothic;">minutes</span>
                </div>
                <button id="start-timer" style="font-family: Sawarabi Gothic; background-color: #b92c0d; color: white;">Start</button>
                <button id="reset-timer" style="font-family: Sawarabi Gothic; background-color: #b92c0d; color: white;">Reset</button>
            </div>
        </div>
    </div>
    <div class="container d-flex" style="align-items: center; justify-content: center; flex-direction: column; margin-top: 50px;">
        <h2 style="font-family: Sawarabi Gothic;">Session To-Do List</h2>
        <form id="task-form">
            <input type="text" id="task-input" placeholder="Add new task..." required style="font-family: Sawarabi Gothic;">
            <input type="text" id="task-priority" placeholder="Priority (e.g., High, Low)" style="font-family: Sawarabi Gothic;">
            <button type="submit" style="font-family: Sawarabi Gothic; margin-top: 50px; background-color: #b92c0d; color: white;">Add Task</button>
        </form>
        <ul id="task-list"></ul>
    </div>

  


    <script>
        let countdown;
        let time = 50 * 60;
        let expected;

        const timerElement = document.getElementById('timer');
        const startButton = document.getElementById('start-timer');
        const resetButton = document.getElementById('reset-timer');
        const customMinutesInput = document.getElementById('custom-minutes');

        function updateDisplay(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function startTimer() {
            // Get custom time if set
            const customMinutes = parseInt(customMinutesInput.value);
            if (customMinutes && customMinutes > 0) {
                time = customMinutes * 60;
            } else {
                time = 50 * 60; // Default to 50 minutes
            }
            
            updateDisplay(time);
            startButton.disabled = true;

            expected = Date.now() + 1000;
            
            countdown = setTimeout(function tick() {
                const drift = Date.now() - expected;
                
                time--;
                updateDisplay(time);

                if (time <= 0) {
                    clearTimeout(countdown);
                    timerElement.textContent = "00:00";
                    startButton.disabled = false;
                    
                    // Play completion sound
                    try {
                        const audio = new Audio('data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU');
                        audio.play();
                    } catch (e) {
                        console.log('Audio notification error', e);
                    }
                    
                    alert("Pomodoro Session Completed");
                } else {
                    expected += 1000;
                    countdown = setTimeout(tick, Math.max(0, 1000 - drift));
                }
            }, 1000);
        }

        function resetTimer() {
            clearTimeout(countdown);
            
            // Get custom time if set
            const customMinutes = parseInt(customMinutesInput.value);
            if (customMinutes && customMinutes > 0) {
                time = customMinutes * 60;
            } else {
                time = 50 * 60; // Default to 50 minutes
            }
            
            updateDisplay(time);
            startButton.disabled = false;
        }

        startButton.addEventListener('click', startTimer);
        resetButton.addEventListener('click', resetTimer);

        // Initialize display
        updateDisplay(time);
    </script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('task-form');
            const input = document.getElementById('task-input');
            const taskList = document.getElementById('task-list');
            const priorityInput = document.getElementById('task-priority');

            
            let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

            
            renderTasks();

            // Add new task
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const taskText = input.value.trim();
                if (taskText === '') return;

                const newTask = {
                id: Date.now(),
                text: taskText,
                priority: priorityInput.value,
                completed: false,
                };

                tasks.push(newTask);
                saveTasks();
                renderTasks();
                input.value = '';
                priorityInput.value = '';
            });

            // Render all tasks
            function renderTasks() {
                taskList.innerHTML = '';
                tasks.forEach(task => {
                const li = document.createElement('li');
                li.className = 'task-item';

                
                li.innerHTML = `
                    <span class="task-text ${task.completed ? 'completed' : ''}">${task.text}</span>
                    ${task.deadline ? `<span class="task-deadline"> (Due: ${task.deadline})</span>` : ''}
                    ${task.priority ? `<span class="task-priority"> [${task.priority}]</span>` : ''}
                    <button class="delete-btn"></button>
                `;
                
                // Toggle completed status
                li.querySelector('.task-text').addEventListener('click', () => {
                    task.completed = !task.completed;
                    saveTasks();
                    renderTasks();
                });

                // Delete task
                li.querySelector('.delete-btn').addEventListener('click', (e) => {
                    const btn = e.target;
                    btn.classList.add('active');

                    setTimeout(() => {
                        li.classList.add('removed'); 
                            setTimeout(() => {
                                tasks = tasks.filter(t => t.id !== task.id);
                                saveTasks();
                                renderTasks();
                            }, 500); 
                        }, 300);
                    });

                taskList.appendChild(li);
                });
            }

            // Save tasks to localStorage
            function saveTasks() {
                localStorage.setItem('tasks', JSON.stringify(tasks));
            }
        });
    </script>
    <script>

        const morning = "おはよう、ケイラちゃん 🌤️"
        const afternoon = "こんにちわ、ケイラちゃん ☀️"
        const evening = "こんばんわ、ケイラちゃん 🌙"
        const night = "おやすみ、ケイラちゃん 🌙"

        function updateDateTime(){
            const now = new Date();
            const options = {weekday:'long' , month:'long', day:'numeric', year:'numeric', 
            hour:'2-digit', minute:'2-digit', second:'2-digit', hour12:true}
        
            document.getElementById("current-time").textContent = now.toLocaleDateString('en-US',options)
            const hour = now.getHours();
            if(hour >= 6 && hour < 11){
            document.getElementById("introduction").innerHTML = morning
            }
            else if(hour >= 11 && hour < 15){
            document.getElementById("introduction").innerHTML = afternoon
            }
            else if(hour >= 15 && hour < 23){
            document.getElementById("introduction").innerHTML = evening
            }
            else {
            document.getElementById("introduction").innerHTML = night
            }
        }
        
            
        
        updateDateTime();
        setInterval(updateDateTime, 1000);


    </script>
    



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
</body>
</html>
